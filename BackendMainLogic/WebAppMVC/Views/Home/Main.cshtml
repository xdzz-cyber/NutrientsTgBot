@{
    Layout = "_Layout";
}

@inject ITelegramBotDbContext TelegramBotDbContext

@using Application.Interfaces
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using System.Security.Claims
@model UserCompleteInfoViewModel

<!--header begins here-->
<partial name="_HeaderNavbarPartial"/>
<!--header ends here-->
<section class="relative pt-16 ">
    <div class="container mx-auto">
        <div class="flex flex-wrap items-center">
            <div class="w-10/12 md:w-6/12 lg:w-4/12 px-12 md:px-4 mr-auto ml-auto -mt-78">
                <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded-lg bg-pink-500" style="background-color: rgb(236,72,153);">
                    <img alt="..." src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=700&amp;q=80" class="w-full align-middle rounded-t-lg">
                    <blockquote class="relative p-8 mb-4">
                        <svg preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 583 95" class="absolute left-0 w-full block h-95-px -top-94-px">
                            <polygon points="-30,95 583,95 583,65" class="text-pink-500 fill-current"></polygon>
                        </svg>
                        <h4 class="text-xl font-bold text-white">
                            Your information
                        </h4>
                        <p class="text-md font-light mt-2 text-white">
                            @Model.UserInfo
                        </p>
                        <p class="text-md font-light mt-2 text-white">
                            @Model.ApprovedAmountOfNutrients
                        </p>
                        <p class="text-md font-light mt-2 text-white">
                            @Model.UserSupplementsOutline
                        </p>
                    </blockquote>
                </div>
            </div>

            <div class="w-full md:w-6/12 px-4">
                <div class="flex flex-wrap">
                    <div class="w-full md:w-6/12 px-4">
                        @* first element starts here *@
                        <div class="relative flex flex-col mt-4" style="min-width: 20vw">
                            <div class="px-4 py-5 flex-auto">
                                <div class="text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white">
                                    <i class="fas fa-sitemap"></i>
                                </div>
                                <h6 class="text-xl mb-1 font-semibold">Update your params</h6>
                                <div class="mb-4 text-blueGray-500 grid grid-cols-2 gap-4">
                                    <a asp-action="DefaultForm" asp-route-actionName="UpdateWeight"
                                       asp-route-controllerName="User"
                                       class="text-blue-400 block pt-2">Update weight</a>
                                    <a class="text-blue-400 block pt-2" asp-action="DefaultForm"
                                       asp-route-controllerName="User" asp-route-actionName="UpdateAge">Update age</a>
                                    <a class="text-blue-400 block" asp-action="DefaultForm"
                                       asp-route-controllerName="User" asp-route-actionName="UpdateGender">Update gender</a>
                                    <a class="text-blue-400 block" asp-action="DefaultForm"
                                       asp-route-controllerName="User" asp-route-actionName="UpdateTallness">Update tallness</a>
                                </div>
                            </div>
                        </div>
                        <div class="relative flex flex-col min-w-0" style="min-width: 20vw">
                            <div class="px-4 py-5 flex-auto">
                                <div class="text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white">
                                    <i class="fas fa-drafting-compass"></i>
                                </div>
                                <h6 class="text-xl mb-1 font-semibold">
                                    Recipes filters
                                </h6>
                                <div class="mb-4 text-blueGray-500">
                                    <p>Filters available are: @Model.AvailableFiltersForRecipes</p>
                                    @if (TelegramBotDbContext.RecipeFiltersUsers.Count(rfu => rfu.IsTurnedIn
                                                                                              && rfu.AppUserId == User.FindFirst(ClaimTypes.NameIdentifier)!.Value) != TelegramBotDbContext.RecipeFilters.Count())
                                    {
                                        <p>If you want to add a new one, please, click
                                            <a class="text-blue-400" asp-action="DefaultForm"
                                               asp-route-actionName="AddRecipeFiltersToUser"
                                               asp-route-controllerName="RecipesFilters">here</a></p>
                                        <a asp-action="TurnOnAllFilters" asp-controller="RecipesFilters" class="text-blue-400">Turn on all filters</a>
                                    }
                                    <p>Your filters:</p>
                                    @if (Model.UserRecipesFilters.Any())
                                    {
                                        @foreach (var filter in Model.UserRecipesFilters)
                                        {
                                            <p>@filter.Name -
                                                <a asp-action="TurnOffRecipeFilter" asp-controller="RecipesFilters"
                                                   asp-route-recipeId="@filter.Id" class="text-blue-400">Turn off</a></p>
                                        }
                                    }
                                    else
                                    {
                                        <p>No filters selected</p>
                                    }

                                    @if (TelegramBotDbContext.RecipeFiltersUsers.Any(rfu => rfu.IsTurnedIn && rfu.AppUserId == User.FindFirst(ClaimTypes.NameIdentifier)!.Value))
                                    {
                                        <div class="inline-block">
                                            <a asp-action="TurnOffAllRecipeFilters" asp-controller="RecipesFilters" class="text-blue-400">Clear</a>
                                            all filters
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="w-full md:w-6/12 px-4">
                        <div class="relative flex flex-col min-w-0 mt-4" style="min-width: 23vw;">
                            <div class="px-4 py-5 flex-auto">
                                <div class="text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <h6 class="text-xl mb-1 font-semibold">Water balance level</h6>
                                <p class="mb-4 text-blueGray-500">
                                    @Model.WaterBalanceInfo.
                                    <span> Click to <a asp-action="DefaultForm" asp-route-controllerName="User" 
                                                                                                              asp-route-actionName="UpdateWaterBalance" class="text-blue-400">update</a></span>
                                    @* You've already consumed 70 and yet have to consume 3115 milliliters more. *@
                                </p>
                                @* <p class="text-blueGray-500"> *@
                                @*      *@
                                @* </p> *@
                            </div>
                        </div>
                        <div class="relative flex flex-col" style="min-width: 27vw">
                            <div class="px-4 py-5 flex-auto">
                                <div class="text-blueGray-500 p-3 text-center inline-flex items-center justify-center w-12 h-12 mb-5 shadow-lg rounded-full bg-white">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                                <h6 class="text-xl mb-1 font-semibold">Nutrients plan</h6>
                                <div class="mb-4 text-blueGray-500">
                                    <div>
                                        <p><pre style="font-family: ui-sans-serif, Arial; font-size: 16px;">@Model.NutrientsPlanInfo</pre></p>
                                        <div>
                                            <p><a asp-action="NutrientsPlanForm" asp-controller="NutrientsPlan" 
                                                  class="text-blue-400">Update plan</a>
                                            </p>
                                        </div>
                                    </div>
                                    @* <div><p>Nutrient name = Fat ,Max value = 1001, Min Value = 0</p></div> *@
                                    @* <div><p>Nutrient name = Carbohydrates ,Max value = 1002, Min Value = 0</p></div> *@
                                    @* <div><p>Nutrient name = Protein ,Max value = 1003, Min Value = 0</p></div> *@
                                    @* <div><p>Nutrient name = Calories ,Max value = 10004, Min Value = 0</p></div> *@
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  <partial name="_Footer"/>
</section>